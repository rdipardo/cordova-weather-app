<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cordova Weather App: API</title>
    <link rel="shortcut icon" type="image/x-icon"
        href="https://raw.githubusercontent.com/rdipardo/cordova-weather-app/master/www/favicon.ico">
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <script>
        function replaceIcon () {
            document.querySelector('.fa.fa-github').style.fontSize = 'initial';
            document.querySelector('.fa.fa-github').style.lineHeight = "0"
            document.querySelector('.fa.fa-github').style.fontWeight = 500;
            document.querySelector('.fa.fa-github').innerText = 'View Source';
        }
    </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" onerror="replaceIcon()"
        href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="styles/custom.css">
</head>

<body>

<div id="main">
    <div class="gh-meta">
    <p><b>Version</b> 1.2.0</p>
    <p><a href="https://github.com/rdipardo/cordova-weather-app/" title="View project on Github"><span class="fa fa-github" aria-hidden="true"></span></a></p>
    </div>
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Copyright 2019-2020 rdipardo &lt;dipardo.r@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * Maps a weather forecast description to an appropriate icon
 * @see https://erikflowers.github.io/weather-icons/api-list.html
 * @param {WeatherReading} reading - A weather forecast object
 * @returns {string} A keyword matching a CSS class name in the icon set
 */
const fetchWeatherIcon = function (reading) {
    const desc = reading.brief || '';
    const hour = reading.currency;
    const extended = reading.longRange || false;

    if ((/(.*clear.*)/iu).test(desc) ||
        (/(sun\w*)/iu).test(desc)) {
        return hour > 6 &amp;&amp; hour &lt; 18 || extended ? 'sunny' : 'clear';
    } else if ((/(.*cloud.*)/iu).test(desc) || (/(.*overcast.*)/iu).test(desc)) {
        return (/(.*partly.*)/iu).test(desc) ||
                (/(.*light.*)/iu).test(desc) ?
            'partly-cloudy' :
            'cloudy';
    } else if ((/(.*rain.*)/iu).test(desc) || (/(.*shower.*)/iu).test(desc)) {
        return (/.*light.*/iu).test(desc) ? 'sprinkle' : 'showers';
    } else if ((/(.*snow.*)/iu).test(desc)) {
        return 'snow';
    } else if ((/.*sleet.*/iu).test(desc)) {
        return 'rain-mix';
    } else if ((/.*thunder.*/iu).test(desc)) {
        return 'thunderstorm';
    } else if ((/(fog)/iu).test(desc) || (/(mist)/iu).test(desc)) {
        return 'fog';
    }

    return 'clear';
}

/**
 * Returns the next day's date as a formatted string
 * @param {number} offset - The number of days to advance
 * @returns {string} A formatted date string
 */
const getNextDate = function (offset) {
    const today = new Date();
    const thirtyDayMonths = [3, 5, 8, 10];
    const leapYear = year => year % 400 === 0 || year % 4 === 0 &amp;&amp; year % 100 !== 0;
    const daysFwd = today.getDate() + offset;
    const thisMon = today.getMonth();
    let tommorrow = new Date(today.setDate(daysFwd));

    if (thisMon in thirtyDayMonths &amp;&amp; daysFwd > 30 ||
        thisMon === 1 &amp;&amp; daysFwd > 28 &amp;&amp; !leapYear(today.getFullYear()) ||
        thisMon === 1 &amp;&amp; daysFwd > 29 &amp;&amp; leapYear(today.getFullYear()) ||
        daysFwd > 31) {

        let lastDay = 31;

        if (thisMon in thirtyDayMonths) {
            lastDay = 30;
        } else if (thisMon === 1) {
            if (leapYear(today.getFullYear())) {
                lastDay = 29;
            } else {
                lastDay = 28;
            }
        }

        tommorrow = new Date(tommorrow.setMonth(thisMon + 1));
        tommorrow = tommorrow.setDate(daysFwd - lastDay);
    }

    return new Date(tommorrow).toLocaleDateString('en-CA', {
        'weekday': 'long',
        'month': 'long',
        'day': 'numeric'
    });
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Cordova Weather App</a></h2><h3>Namespaces</h3><ul><li><a href="AppData.html">AppData</a></li><li><a href="AppView.html">AppView</a></li><li><a href="ForecastController.html">ForecastController</a></li><li><a href="ForecastWorker.html">ForecastWorker</a></li><li><a href="Handlers.html">Handlers</a></li><li><a href="LocationController.html">LocationController</a></li><li><a href="PreferenceController.html">PreferenceController</a></li></ul><h3>Classes</h3><ul><li><a href="APIRequest.html">APIRequest</a></li><li><a href="Forecast.html">Forecast</a></li><li><a href="Location.html">Location</a></li><li><a href="Preference.html">Preference</a></li><li><a href="WeatherReading.html">WeatherReading</a></li></ul><h3>Global</h3><ul><li><a href="global.html#fetchWeatherIcon">fetchWeatherIcon</a></li><li><a href="global.html#getNextDate">getNextDate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on October 26, 2020
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
<script>
    var home = document.querySelector('a[href="index.html"]');
    home.innerHTML = "Readme";
    home.href = "index.html#content-start";

    var target = window.location.href.split('/').reverse()[0]
    if (target) {
      var activePage = document.querySelector('nav ul li a[href="' + target + '"]');
      if (activePage) {
          activePage.style.fontWeight = '900';
      }
    }
</script>
</body>
</html>
